{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.splice.js\";\nvar state = {\n  albums: [],\n  artist: {\n    name: 'TiÃ£o Carreiro'\n  },\n  search: '',\n  albumMenu: false,\n  trackMenu: false\n};\nvar actions = {\n  //ALBUMS\n  getAlbums: function getAlbums(_ref) {\n    var commit = _ref.commit;\n    //update to use AXIOS,\n    return new Promise(function () {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"Accept\", \"application/json\");\n      var requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n      };\n      fetch(\"http://127.0.0.1:8000/api/v1/albums\", requestOptions).then(function (response) {\n        return response.text();\n      }).then(function (result) {\n        result = JSON.parse(result);\n        commit('getAlbums', result.data);\n      }).catch(function (error) {\n        return console.log('error', error);\n      });\n    });\n  },\n  addAlbums: function addAlbums(_ref2, album) {\n    var commit = _ref2.commit;\n    return new Promise(function () {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"Accept\", \"application/json\");\n      var raw = JSON.stringify(album);\n      var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n      };\n      fetch(\"http://127.0.0.1:8000/api/v1/albums\", requestOptions).then(function (response) {\n        return response.text();\n      }).then(function (result) {\n        result = JSON.parse(result);\n        album.id = result.data.id;\n        commit('addAlbum', album);\n      }).catch(function (error) {\n        return console.log('error', error);\n      });\n    });\n  },\n  delAlbums: function delAlbums(_ref3, album) {\n    var commit = _ref3.commit;\n    return new Promise(function () {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"Accept\", \"application/json\");\n      var requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n      };\n      fetch(\"http://127.0.0.1:8000/api/v1/albums/\" + album, requestOptions).then(function (response) {\n        return response.text();\n      }).then(function () {\n        commit('delAlbum', album);\n      }).catch(function (error) {\n        return console.log('error', error);\n      });\n    });\n  },\n  //TRACKS\n  addTrack: function addTrack(_ref4, track) {\n    var commit = _ref4.commit;\n    return new Promise(function () {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"Accept\", \"application/json\");\n      var raw = JSON.stringify(track);\n      var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n      };\n      fetch(\"http://127.0.0.1:8000/api/v1/tracks\", requestOptions).then(function (response) {\n        return response.text();\n      }).then(function (result) {\n        result = JSON.parse(result);\n        track.id = result.data.id;\n        commit('addTrack', track);\n      }).catch(function (error) {\n        return console.log('error', error);\n      });\n    });\n  },\n  delTrack: function delTrack(_ref5, track) {\n    var commit = _ref5.commit;\n    return new Promise(function () {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"Accept\", \"application/json\");\n      var requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n      };\n      fetch(\"http://127.0.0.1:8000/api/v1/tracks/\" + track.id, requestOptions).then(function (response) {\n        return response.text();\n      }).then(function () {\n        commit('delTrack', track);\n      }).catch(function (error) {\n        return console.log('error', error);\n      });\n    });\n  }\n};\nvar mutations = {\n  //ALBUMS\n  getAlbums: function getAlbums(state, result) {\n    state.albums = [];\n    result = Object.values(result);\n    state.albums = result;\n  },\n  addAlbum: function addAlbum(state, album) {\n    state.albums.push(album);\n  },\n  delAlbum: function delAlbum(state, album) {\n    var exists = state.albums.findIndex(function (x) {\n      return x.id === album;\n    });\n\n    if (exists !== -1) {\n      state.albums.splice(exists, 1);\n    } else {\n      console.log('impossivel remover o desconto');\n    }\n  },\n  //TRACKS\n  addTrack: function addTrack(state, track) {\n    var exists = state.albums.findIndex(function (x) {\n      return x.id === track.album_id;\n    });\n    state.albums[exists].tracks.push(track);\n  },\n  delTrack: function delTrack(state, track) {\n    var exists = state.albums.findIndex(function (x) {\n      return x.id === track.album_id;\n    });\n\n    if (exists !== -1) {\n      var existsTrack = state.albums[exists].tracks.findIndex(function (x) {\n        return x.id === track.id;\n      });\n      state.albums.splice(existsTrack, 1);\n    } else {\n      console.log('impossivel remover o desconto');\n    }\n  }\n};\nexport default {\n  state: state,\n  actions: actions,\n  mutations: mutations\n};","map":{"version":3,"names":["state","albums","artist","name","search","albumMenu","trackMenu","actions","getAlbums","commit","Promise","myHeaders","Headers","append","requestOptions","method","headers","redirect","fetch","then","response","text","result","JSON","parse","data","catch","error","console","log","addAlbums","album","raw","stringify","body","id","delAlbums","addTrack","track","delTrack","mutations","Object","values","addAlbum","push","delAlbum","exists","findIndex","x","splice","album_id","tracks","existsTrack"],"sources":["/var/www/html/discografia-project/discografia-front/src/store/modules/discography.js"],"sourcesContent":["const state = {\n    albums:[],\n    artist:{\n        name:'TiÃ£o Carreiro',\n    },\n    \n    search:'',\n    albumMenu:false,\n    trackMenu:false,\n}\n\nconst actions = { \n    //ALBUMS\n    getAlbums({commit}){\n        //update to use AXIOS,\n        return new Promise(()=>{\n            var myHeaders = new Headers();\n                myHeaders.append(\"Content-Type\", \"application/json\");\n                myHeaders.append(\"Accept\", \"application/json\");\n            var requestOptions = {\n                method: 'GET',\n                headers: myHeaders,\n                redirect: 'follow'\n                };\n            fetch(\"http://127.0.0.1:8000/api/v1/albums\", requestOptions)\n            .then(response => response.text())\n            .then(result =>{\n                result = JSON.parse(result);\n                commit('getAlbums', result.data);\n            })\n            .catch(error => console.log('error', error));\n        })\n    },\n    addAlbums({commit},album){\n        return new Promise(()=>{\n            var myHeaders = new Headers();\n            myHeaders.append(\"Content-Type\", \"application/json\");\n            myHeaders.append(\"Accept\", \"application/json\");\n            \n            var raw = JSON.stringify(album);\n            var requestOptions = {\n              method: 'POST',\n              headers: myHeaders,\n              body: raw,\n              redirect: 'follow'\n            };\n            \n            fetch(\"http://127.0.0.1:8000/api/v1/albums\", requestOptions)\n              .then(response => response.text())\n              .then(result=>{\n                  result = JSON.parse(result);\n                  album.id = result.data.id;\n                commit('addAlbum',album);\n              })\n              .catch(error => console.log('error', error));\n        })\n    },\n    delAlbums({commit},album){\n        return new Promise(()=>{\n            var myHeaders = new Headers();\n            myHeaders.append(\"Content-Type\", \"application/json\");\n            myHeaders.append(\"Accept\", \"application/json\");\n            \n            var requestOptions = {\n              method: 'DELETE',\n              headers: myHeaders,\n              redirect: 'follow'\n            };\n            \n            fetch(\"http://127.0.0.1:8000/api/v1/albums/\"+album, requestOptions)\n              .then(response => response.text())\n              .then(() => {\n                commit('delAlbum',album);\n              })\n              .catch(error => console.log('error', error));\n        })\n    },\n    //TRACKS\n    addTrack({commit},track){\n        return new Promise(()=>{\n            var myHeaders = new Headers();\n            myHeaders.append(\"Content-Type\", \"application/json\");\n            myHeaders.append(\"Accept\", \"application/json\");\n            \n            var raw = JSON.stringify(track);\n            \n            var requestOptions = {\n              method: 'POST',\n              headers: myHeaders,\n              body: raw,\n              redirect: 'follow'\n            };\n            \n            fetch(\"http://127.0.0.1:8000/api/v1/tracks\", requestOptions)\n              .then(response => response.text())\n              .then(result => {\n                result   = JSON.parse(result);\n                track.id = result.data.id;\n                commit('addTrack',track);\n              })\n              .catch(error => console.log('error', error));\n        })\n    },\n    delTrack({commit},track){\n        return new Promise(()=>{\n            var myHeaders = new Headers();\n            myHeaders.append(\"Content-Type\", \"application/json\");\n            myHeaders.append(\"Accept\", \"application/json\");\n\n            var requestOptions = {\n            method: 'DELETE',\n            headers: myHeaders,\n            redirect: 'follow'\n            };\n\n            fetch(\"http://127.0.0.1:8000/api/v1/tracks/\"+track.id, requestOptions)\n            .then(response => response.text())\n            .then(() => {\n                commit('delTrack',track);\n            })\n            .catch(error => console.log('error', error));\n        })\n    },\n}\n\nconst mutations = {\n    //ALBUMS\n    getAlbums(state,result){\n        state.albums = [];\n        result = Object.values(result);\n        state.albums = result;\n    },\n    addAlbum(state,album){\n       state.albums.push(album);\n    },\n    delAlbum(state,album){\n        let exists = state.albums.findIndex(x => x.id === album);\n        if(exists !== -1){\n            state.albums.splice(exists,1)\n        }else{\n            console.log('impossivel remover o desconto')\n        }\n    },\n    //TRACKS\n    addTrack(state,track){\n        let exists = state.albums.findIndex(x => x.id === track.album_id);\n        state.albums[exists].tracks.push(track);\n    },\n    delTrack(state,track){\n        let exists = state.albums.findIndex(x => x.id === track.album_id);\n        if(exists !== -1){\n            let existsTrack = state.albums[exists].tracks.findIndex(x => x.id === track.id);\n            state.albums.splice(existsTrack,1)\n        }else{\n            console.log('impossivel remover o desconto')\n        }\n    }\n\n}\nexport default {\n    state,\n    actions,\n    mutations,\n  };"],"mappings":"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"},"metadata":{},"sourceType":"module"}